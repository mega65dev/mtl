
; ******** Source: main.asm
     1                          
     2                              !if target=1 {

; ******** Source: bootmega.asm
     1                          
     2                          zeroPage = 0
     3                          myTemp4 = $FC  
     4                          
     5                                  *=$2001
     6  2001 1120                       !word   endLine
     7  2003 0100                       !word   1
     8  2005 fe02                       !byte   $fe,$02
     9  2007 303a                       !text   "0:"
    10  2009 9e                         !byte   $9e
    11  200a 38323234                   !text   "8224"
    12  200e 00                         !byte   0
    13  200f 0000                       !word   0
    14                          endLine   
    15                          
    16                                  *=$2020
    17  2020 78                         sei
    18  2021 a935                       lda     #$35
    19  2023 8501                       sta     $01
    20                          
    21  2025 a900                       lda     #$00
    22  2027 aa                         tax 
    23  2028 a8                         tay 
    24  2029 4b                         taz 
    25  202a 5c                         map
    26  202b ea                         eom
    27                          
    28  202c a940                       lda     #$40
    29  202e 5b                         tab
    30  202f 4c5b20                     jmp     start
    31                          
    32                          PrintCharacter
    33  2032 48                         pha
    34  2033 da                         phx
    35  2034 db                         phz
    36                          
    37  2035 ae5a20                     ldx     charPos
    38  2038 ab5a20                     ldz     charPos
    39  203b ee5a20                     inc     charPos
    40  203e 9d0008                     sta     $0800,x
    41                          
    42  2041 a900                       lda     #$00
    43  2043 85fc                       sta     myTemp4
    44  2045 a9f8                       lda     #$F8
    45  2047 85fd                       sta     myTemp4+1
    46  2049 a901                       lda     #$01
    47  204b 85fe                       sta     myTemp4+2
    48  204d a900                       lda     #$00
    49  204f 85ff                       sta     myTemp4+3
    50  2051 a901                       lda     #$01
    51  2053 ea92fc                     sta     [myTemp4],z
    52  2056 fb                         plz
    53  2057 fa                         plx
    54  2058 68                         pla
    55  2059 60                         rts
    56                          
    57                          charPos
    58  205a 00                         !byte   0

; ******** Source: main.asm
     4                              } else {
     5                              !source "boottest.asm"
     6                              }
     7                          
     8                          start
     9  205b a92a                       lda     #42
    10  205d 203220                     jsr     PrintCharacter
    11                          halt
    12  2060 6901                       adc     #1
    13  2062 297f                       and     #127
    14  2064 203220                     jsr     PrintCharacter
    15  2067 4c6020                     jmp     halt
    16                          
